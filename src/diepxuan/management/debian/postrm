#!/usr/bin/env bash
#!/bin/bash
#!/bin/sh
# prerm script
#
# see: dh_installdeb(1)

set -e

case "$1" in
remove)
    echo "Gói đang được gỡ bỏ..."
    ;;
purge)
    echo "Xóa hoàn toàn dữ liệu cấu hình..."
    CONFIG_FILE="/etc/lxc/default.conf"
    HOOK_LINE="lxc.hook.create = /var/lib/lxc/hooks/default-hook.sh"

    # Kiểm tra file có tồn tại không
    if [[ -f "$CONFIG_FILE" ]]; then
        # Kiểm tra xem dòng hook có trong file không
        if grep -Fxq "$HOOK_LINE" "$CONFIG_FILE"; then
            sudo sed -i "\|$HOOK_LINE|d" "$CONFIG_FILE"
            echo "✔ Đã gỡ bỏ hook khỏi $CONFIG_FILE"
        fi
    fi
    ;;
upgrade | failed-upgrade | abort-install | abort-upgrade | disappear) ;;
*)
    echo "postrm called with unknown argument: $1" >&2
    exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0
